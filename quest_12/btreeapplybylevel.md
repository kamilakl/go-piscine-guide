# Quest 12.8. btreeapplybylevel

## –ù–∞–∑–≤–∞–Ω–∏–µ —Ñ–∞–π–ª–∞ Go

`btreeapplybylevel.go`

---

## –£—Å–ª–æ–≤–∏—è –∑–∞–¥–∞–Ω–∏—è

| **Instruction**                                                                                                      | **–ü–µ—Ä–µ–≤–æ–¥**                                                                                          |
| -------------------------------------------------------------------------------------------------------------------- | ---------------------------------------------------------------------------------------------------- |
| *Write a function, BTreeApplyByLevel, that applies the function given by f, to each node of the tree given by root.* | *–ù–∞–ø–∏—à–∏—Ç–µ —Ñ—É–Ω–∫—Ü–∏—é, –∫–æ—Ç–æ—Ä–∞—è –ø—Ä–∏–º–µ–Ω—è–µ—Ç –∑–∞–¥–∞–Ω–Ω—É—é —Ñ—É–Ω–∫—Ü–∏—é f –∫ –∫–∞–∂–¥–æ–º—É —É–∑–ª—É –¥–µ—Ä–µ–≤–∞, –¥–≤–∏–≥–∞—è—Å—å –ø–æ —É—Ä–æ–≤–Ω—è–º.* |

---

–ù—É–∂–Ω–æ –Ω–∞–ø–∏—Å–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏—é, –∫–æ—Ç–æ—Ä–∞—è **–æ–±—Ö–æ–¥–∏—Ç –¥–µ—Ä–µ–≤–æ –ø–æ —É—Ä–æ–≤–Ω—è–º (level-order traversal)** –∏ –≤—ã–∑—ã–≤–∞–µ—Ç —Ñ—É–Ω–∫—Ü–∏—é `f` –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —É–∑–ª–∞.

üìå **Level-order traversal –æ–∑–Ω–∞—á–∞–µ—Ç:**

> —Å–Ω–∞—á–∞–ª–∞ —É—Ä–æ–≤–µ–Ω—å 1 ‚Üí –∑–∞—Ç–µ–º —É—Ä–æ–≤–µ–Ω—å 2 ‚Üí –∑–∞—Ç–µ–º —É—Ä–æ–≤–µ–Ω—å 3 ‚Üí ...

–¢–æ –µ—Å—Ç—å **—Å–ø–µ—Ä–≤–∞ –∫–æ—Ä–µ–Ω—å, –ø–æ—Ç–æ–º –¥–µ—Ç–∏, –ø–æ—Ç–æ–º –≤–Ω—É–∫–∏**, —Å–ª–µ–≤–∞ –Ω–∞–ø—Ä–∞–≤–æ.

---

### –ü—Ä–∏–º–µ—Ä

* **–í–≤–æ–¥:**

```
–î–µ—Ä–µ–≤–æ:
        4
      /   \
     1     7
          /
         5
```

* **–í—ã–≤–æ–¥:**

```
4
1
7
5
```

–≠—Ç–æ –ø–æ—Ä—è–¥–æ–∫ —É—Ä–æ–≤–Ω–µ–π:

* –£—Ä–æ–≤–µ–Ω—å 1 ‚Üí 4
* –£—Ä–æ–≤–µ–Ω—å 2 ‚Üí 1, 7
* –£—Ä–æ–≤–µ–Ω—å 3 ‚Üí 5

---

## –†–µ—à–µ–Ω–∏–µ

```go
package piscine

func BTreeApplyByLevel(root *TreeNode, f func(...interface{}) (int, error)) {
	if root == nil {
		return
	}

	queue := []*TreeNode{root}

	for len(queue) > 0 {
		node := queue[0]
		queue = queue[1:]

		f(node.Data)

		if node.Left != nil {
			queue = append(queue, node.Left)
		}
		if node.Right != nil {
			queue = append(queue, node.Right)
		}
	}
}
```

---

## –ö–ª—é—á–µ–≤—ã–µ –ø–æ–Ω—è—Ç–∏—è

| **–ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç / —ç–ª–µ–º–µ–Ω—Ç –∫–æ–¥–∞**      | **–û–±—ä—è—Å–Ω–µ–Ω–∏–µ –∏ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ**                                                    |
| ---------------------------------- | ------------------------------------------------------------------------------ |
| **Level-order traversal**          | –û–±—Ö–æ–¥ –¥–µ—Ä–µ–≤–∞ –ø–æ —É—Ä–æ–≤–Ω—è–º —Å –ø–æ–º–æ—â—å—é –æ—á–µ—Ä–µ–¥–∏ (BFS).                               |
| **–û—á–µ—Ä–µ–¥—å (queue)**                | –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö: –ø–µ—Ä–≤—ã–π –≤–æ—à—ë–ª ‚Üí –ø–µ—Ä–≤—ã–π –≤—ã—à–µ–ª. –ò–¥–µ–∞–ª—å–Ω–∞ –¥–ª—è –æ–±—Ö–æ–¥–∞ –ø–æ —É—Ä–æ–≤–Ω—è–º. |
| **–°—Ä–µ–∑ `[]*TreeNode` –∫–∞–∫ –æ—á–µ—Ä–µ–¥—å** | –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –æ—á–µ—Ä–µ–¥–∏ —á–µ—Ä–µ–∑ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –≤ –∫–æ–Ω–µ—Ü –∏ —É–¥–∞–ª–µ–Ω–∏–µ –∏–∑ –Ω–∞—á–∞–ª–∞.              |
| **–†–µ–∫—É—Ä—Å–∏—è –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è**       | –û–±—Ö–æ–¥ –ø–æ —É—Ä–æ–≤–Ω—è–º –¥–µ–ª–∞–µ—Ç—Å—è —Å –ø–æ–º–æ—â—å—é —Ü–∏–∫–ª–∞, –∞ –Ω–µ —Ä–µ–∫—É—Ä—Å–∏–∏.                      |
| **–§—É–Ω–∫—Ü–∏—è `f`**                    | –í—ã–∑—ã–≤–∞–µ—Ç—Å—è –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —É–∑–ª–∞: –Ω–∞–ø—Ä–∏–º–µ—Ä, `fmt.Println(node.Data)`.               |
| **–î–æ–±–∞–≤–ª–µ–Ω–∏–µ –¥–µ—Ç–µ–π (`append`)**    | –ü–æ–∑–≤–æ–ª—è–µ—Ç —Ä–∞—Å—à–∏—Ä—è—Ç—å –æ—á–µ—Ä–µ–¥—å, —á—Ç–æ–±—ã –ø–æ—Ç–æ–º –æ–±—Ä–∞–±–æ—Ç–∞—Ç—å —Å–ª–µ–¥—É—é—â–∏–π —É—Ä–æ–≤–µ–Ω—å.         |
| **–ü—Ä–æ–≤–µ—Ä–∫–∞ `if root == nil`**      | –ü—É—Å—Ç–æ–µ –¥–µ—Ä–µ–≤–æ ‚Üí –Ω–µ—á–µ–≥–æ –æ–±—Ö–æ–¥–∏—Ç—å.                                               |

---

## –õ–æ–≥–∏–∫–∞ –∏ –ø–æ—à–∞–≥–æ–≤—ã–π —Ä–∞–∑–±–æ—Ä –∫–æ–¥–∞

### 1. –û–±—ä—è–≤–ª–µ–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏

```go
func BTreeApplyByLevel(root *TreeNode, f func(...interface{}) (int, error)) {
```

–ü–∞—Ä–∞–º–µ—Ç—Ä—ã —Ñ—É–Ω–∫—Ü–∏–∏:

* `root` ‚Äî –∫–æ—Ä–µ–Ω—å –¥–µ—Ä–µ–≤–∞
* `f` ‚Äî —Ñ—É–Ω–∫—Ü–∏—è, –∫–æ—Ç–æ—Ä—É—é –Ω—É–∂–Ω–æ –ø—Ä–∏–º–µ–Ω–∏—Ç—å –∫ –∫–∞–∂–¥–æ–º—É —É–∑–ª—É
  (–Ω–∞–ø—Ä–∏–º–µ—Ä, `fmt.Println`)

---

### 2. –ë–∞–∑–æ–≤–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞: –¥–µ—Ä–µ–≤–æ –ø—É—Å—Ç–æ–µ?

```go
if root == nil {
	return
}
```

–ï—Å–ª–∏ –∫–æ—Ä–µ–Ω—å –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç ‚Üí –æ–±—Ö–æ–¥ –Ω–µ –Ω—É–∂–µ–Ω.

---

### 3. –°–æ–∑–¥–∞—ë–º –æ—á–µ—Ä–µ–¥—å –∏ –∫–ª–∞–¥—ë–º –≤ –Ω–µ—ë –∫–æ—Ä–µ–Ω—å

```go
queue := []*TreeNode{root}
```

–ú—ã —Å–æ–∑–¥–∞—ë–º –æ—á–µ—Ä–µ–¥—å ‚Äî —Å—Ä–µ–∑, —Å–æ–¥–µ—Ä–∂–∞—â–∏–π:

```
queue = [4]
```

–û—á–µ—Ä–µ–¥—å –Ω—É–∂–Ω–∞ –¥–ª—è –æ–±—Ö–æ–¥–∞ **–ø–æ —É—Ä–æ–≤–Ω—è–º**, –∫–∞–∫ –≤ BFS.

---

### 4. –ù–∞—á–∏–Ω–∞–µ–º –æ–±—Ö–æ–¥: –ø–æ–∫–∞ –æ—á–µ—Ä–µ–¥—å –Ω–µ –ø—É—Å—Ç–∞—è

```go
for len(queue) > 0 {
```

–ö–∞–∂–¥—ã–π —Ü–∏–∫–ª:

1. –¥–æ—Å—Ç–∞—ë–º –ø–µ—Ä–≤—ã–π —ç–ª–µ–º–µ–Ω—Ç
2. –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º –µ–≥–æ —á–µ—Ä–µ–∑ `f`
3. –¥–æ–±–∞–≤–ª—è–µ–º –µ–≥–æ –¥–µ—Ç–µ–π

---

### 5. –î–æ—Å—Ç–∞—ë–º –ø–µ—Ä–≤—ã–π —ç–ª–µ–º–µ–Ω—Ç –æ—á–µ—Ä–µ–¥–∏ (dequeue)

```go
node := queue[0]
queue = queue[1:]
```

–î–µ–π—Å—Ç–≤–∏—è:

* `node := queue[0]` ‚Üí –±–µ—Ä—ë–º –ø–µ—Ä–≤—ã–π —ç–ª–µ–º–µ–Ω—Ç (FIFO)
* `queue = queue[1:]` ‚Üí —É–¥–∞–ª—è–µ–º –ø–µ—Ä–≤—ã–π —ç–ª–µ–º–µ–Ω—Ç

–ü—Ä–∏–º–µ—Ä:

```
queue = [4, 1, 7]
after dequeue ‚Üí [1, 7]
```

---

### 6. –ü—Ä–∏–º–µ–Ω—è–µ–º —Ñ—É–Ω–∫—Ü–∏—é f

```go
f(node.Data)
```

–î–ª—è `fmt.Println` ‚Äî –ø—Ä–æ—Å—Ç–æ –ø–µ—á–∞—Ç–∞–µ—Ç –∑–Ω–∞—á–µ–Ω–∏–µ —É–∑–ª–∞.

---

### 7. –î–æ–±–∞–≤–ª—è–µ–º –≤ –æ—á–µ—Ä–µ–¥—å –¥–µ—Ç–µ–π —É–∑–ª–∞

```go
if node.Left != nil {
	queue = append(queue, node.Left)
}
if node.Right != nil {
	queue = append(queue, node.Right)
}
```

–ü–æ—Ä—è–¥–æ–∫:

1. —Å–ø–µ—Ä–≤–∞ –ª–µ–≤—ã–π —Ä–µ–±—ë–Ω–æ–∫
2. –∑–∞—Ç–µ–º –ø—Ä–∞–≤—ã–π

–¢–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º –æ—á–µ—Ä–µ–¥—å –≤—Å–µ–≥–¥–∞ —Ö—Ä–∞–Ω–∏—Ç —É–∑–ª—ã **—Å—Ç—Ä–æ–≥–æ –ø–æ —É—Ä–æ–≤–Ω—è–º**.

---

## –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ –ø—Ä–∏–º–µ—Ä–µ

–ü–æ—Å–ª–µ –≤—Å—Ç–∞–≤–æ–∫ –¥–µ—Ä–µ–≤–æ:

```
        4
      /   \
     1     7
          /
         5
```

### –®–∞–≥–∏ –ø—Ä–æ–≥—Ä–∞–º–º—ã:

#### –°—Ç–∞—Ä—Ç:

queue = [4]

#### –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º 4:

–ø–µ—á–∞—Ç–∞–µ–º: **4**
–¥–æ–±–∞–≤–ª—è–µ–º 1 –∏ 7
queue = [1, 7]

#### –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º 1:

–ø–µ—á–∞—Ç–∞–µ–º: **1**
–Ω–µ—Ç –¥–µ—Ç–µ–π
queue = [7]

#### –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º 7:

–ø–µ—á–∞—Ç–∞–µ–º: **7**
–¥–æ–±–∞–≤–ª—è–µ–º 5
queue = [5]

#### –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º 5:

–ø–µ—á–∞—Ç–∞–µ–º: **5**
–Ω–µ—Ç –¥–µ—Ç–µ–π
queue = []

–û–ë–•–û–î –ó–ê–í–ï–†–®–Å–ù.

---

## –ì–ª–æ—Å—Å–∞—Ä–∏–π

| **–¢–µ—Ä–º–∏–Ω**                     | **–ü–æ–Ω—è—Ç–Ω–æ–µ –æ–±—ä—è—Å–Ω–µ–Ω–∏–µ**                                       |
| ------------------------------ | ------------------------------------------------------------- |
| **BFS (Breadth-First Search)** | –ê–ª–≥–æ—Ä–∏—Ç–º –æ–±—Ö–æ–¥–∞ –≥—Ä–∞—Ñ–∞/–¥–µ—Ä–µ–≤–∞ –ø–æ —É—Ä–æ–≤–Ω—è–º.                      |
| **–û—á–µ—Ä–µ–¥—å (queue)**            | –°—Ç—Ä—É–∫—Ç—É—Ä–∞ FIFO: –ø–µ—Ä–≤—ã–π –≤–æ—à—ë–ª ‚Üí –ø–µ—Ä–≤—ã–π –≤—ã—à–µ–ª.                  |
| **append**                     | –î–æ–±–∞–≤–ª—è–µ—Ç —ç–ª–µ–º–µ–Ω—Ç—ã –≤ –∫–æ–Ω–µ—Ü —Å—Ä–µ–∑–∞.                             |
| **Level-order**                | –û–±—Ö–æ–¥ –¥–µ—Ä–µ–≤–∞ "—à–∏—Ä–∏–Ω—É": —É—Ä–æ–≤–µ–Ω—å –∑–∞ —É—Ä–æ–≤–Ω–µ–º.                    |
| **node.Left / node.Right**     | –î–µ—Ç–∏ —É–∑–ª–∞, –∫–æ—Ç–æ—Ä—ã–µ –ø–æ–ø–∞–¥–∞—é—Ç –≤ –æ—á–µ—Ä–µ–¥—å –¥–ª—è –¥–∞–ª—å–Ω–µ–π—à–µ–≥–æ –æ–±—Ö–æ–¥–∞. |
| **nil**                        | –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ —É–∑–ª–∞.                                              |
| **–î–µ–∫—å—é (dequeue)**            | –û–ø–µ—Ä–∞—Ü–∏—è —É–¥–∞–ª–µ–Ω–∏—è —ç–ª–µ–º–µ–Ω—Ç–∞ –∏–∑ –Ω–∞—á–∞–ª–∞ –æ—á–µ—Ä–µ–¥–∏.                 |

---

## –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

–ß—Ç–æ –Ω—É–∂–Ω–æ –≤—ã–Ω–µ—Å—Ç–∏ –∏–∑ —ç—Ç–æ–≥–æ –∑–∞–¥–∞–Ω–∏—è:

* **Level-order traversal** ‚Äî –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–π –æ–±—Ö–æ–¥, –∫–æ—Ç–æ—Ä—ã–π —Ç—Ä–µ–±—É–µ—Ç –æ—á–µ—Ä–µ–¥—å.
* –≠—Ç–æ—Ç –∞–ª–≥–æ—Ä–∏—Ç–º ‚Äî —ç—Ç–æ **BFS**, –≤ –æ—Ç–ª–∏—á–∏–µ –æ—Ç —Ä–µ–∫—É—Ä—Å–∏–≤–Ω—ã—Ö –æ–±—Ö–æ–¥–æ–≤ (DFS).
* –û—á–µ—Ä–µ–¥—å –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø—Ä–æ—Ö–æ–¥–∏—Ç—å –¥–µ—Ä–µ–≤–æ —Ä–æ–≤–Ω–æ –≤ —Ç–∞–∫–æ–º –ø–æ—Ä—è–¥–∫–µ:
  ‚Üí —Å–Ω–∞—á–∞–ª–∞ –∫–æ—Ä–µ–Ω—å
  ‚Üí –ø–æ—Ç–æ–º –≤—Å–µ –¥–µ—Ç–∏
  ‚Üí –ø–æ—Ç–æ–º –≤—Å–µ –≤–Ω—É–∫–∏
* –ö –∫–∞–∂–¥–æ–º—É —É–∑–ª—É –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è —Ñ—É–Ω–∫—Ü–∏—è `f`, –∫–æ—Ç–æ—Ä—É—é –º–æ–∂–Ω–æ –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å –ª—é–±—É—é: –≤—ã–≤–æ–¥, —Ä–∞—Å—á—ë—Ç—ã, –Ω–∞–∫–æ–ø–ª–µ–Ω–∏–µ –∏ —Ç.–¥.
* –≠—Ç–æ –æ–¥–∏–Ω –∏–∑ —Å–∞–º—ã—Ö –ø—Ä–∞–∫—Ç–∏—á–Ω—ã—Ö –æ–±—Ö–æ–¥–æ–≤ ‚Äî —á–∞—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ –∑–∞–¥–∞—á–∞—Ö –ø–æ –≥—Ä–∞—Ñ–∞–º, –¥–µ—Ä–µ–≤—å—è–º, –∞–ª–≥–æ—Ä–∏—Ç–º–∞–º –ø–æ–∏—Å–∫–∞.
