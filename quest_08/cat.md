# üìÅ Quest 8.4 Cat 

## –ù–∞–∑–≤–∞–Ω–∏–µ —Ñ–∞–π–ª–∞ Go
`main.go`

---

## –£—Å–ª–æ–≤–∏—è –∑–∞–¥–∞–Ω–∏—è

| **Instruction** | **–ü–µ—Ä–µ–≤–æ–¥** |
|:--------------------------------------|:--------------------------------------------------------------------------------------------------------------------------------------------------|
| *Write a program that behaves like a simplified `cat` command. If the program is called without arguments it should take the standard input (stdin) and print it back on the standard output (stdout).* | *–ù–∞–ø–∏—à–∏—Ç–µ –ø—Ä–æ–≥—Ä–∞–º–º—É, –∫–æ—Ç–æ—Ä–∞—è —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–∞–∫ —É–ø—Ä–æ—â–µ–Ω–Ω–∞—è –∫–æ–º–∞–Ω–¥–∞ `cat`. –ï—Å–ª–∏ –ø—Ä–æ–≥—Ä–∞–º–º–∞ –∑–∞–ø—É—â–µ–Ω–∞ –±–µ–∑ –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤, –æ–Ω–∞ –¥–æ–ª–∂–Ω–∞ —Å—á–∏—Ç—ã–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ —Å–æ **—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–≥–æ –≤–≤–æ–¥–∞ (stdin)** –∏ –≤—ã–≤–æ–¥–∏—Ç—å –∏—Ö –Ω–∞ **—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –≤—ã–≤–æ–¥ (stdout)**.* |

---

–ù—É–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å –ø—Ä–æ–≥—Ä–∞–º–º—É, –∫–æ—Ç–æ—Ä–∞—è –º–æ–∂–µ—Ç –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –¥–≤–∞ —Å—Ü–µ–Ω–∞—Ä–∏—è:
1.  **–°—á–∏—Ç—ã–≤–∞–Ω–∏–µ –∏–∑ —Ñ–∞–π–ª–æ–≤ (—Å –∞—Ä–≥—É–º–µ–Ω—Ç–∞–º–∏):** –ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ —á–∏—Ç–∞–µ—Ç –∏ –≤—ã–≤–æ–¥–∏—Ç —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –æ–¥–Ω–æ–≥–æ –∏–ª–∏ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —Ñ–∞–π–ª–æ–≤, –ø–µ—Ä–µ–¥–∞–Ω–Ω—ã—Ö –∫–∞–∫ –∞—Ä–≥—É–º–µ–Ω—Ç—ã. –î–æ–ª–∂–Ω–∞ –≤—ã–≤–æ–¥–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ—à–∏–±–∫–µ, –µ—Å–ª–∏ —Ñ–∞–π–ª –Ω–µ –Ω–∞–π–¥–µ–Ω.
2.  **–°—á–∏—Ç—ã–≤–∞–Ω–∏–µ –∏–∑ stdin (–±–µ–∑ –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤):** –ß–∏—Ç–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ, –∫–æ—Ç–æ—Ä—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–≤–æ–¥–∏—Ç —Å –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã, –∏ –≤—ã–≤–æ–¥–∏—Ç –∏—Ö –æ–±—Ä–∞—Ç–Ω–æ, –ø–æ–∫–∞ –Ω–µ –ø–æ–ª—É—á–∏—Ç —Å–∏–≥–Ω–∞–ª –∫–æ–Ω—Ü–∞ –≤–≤–æ–¥–∞ (`^C` –∏–ª–∏ `Ctrl+D`).

### –ü—Ä–∏–º–µ—Ä

- **–í–≤–æ–¥:** `$ go run . abc` (–≥–¥–µ `abc` –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç)
- **–í—ã–≤–æ–¥:** `ERROR: open abc: no such file or directory`

---

- **–í–≤–æ–¥:** `$ go run . quest8.txt quest8T.txt`
- **–í—ã–≤–æ–¥:** (–°–æ–¥–µ—Ä–∂–∏–º–æ–µ –ø–µ—Ä–≤–æ–≥–æ —Ñ–∞–π–ª–∞, –∑–∞—Ç–µ–º —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –≤—Ç–æ—Ä–æ–≥–æ —Ñ–∞–π–ª–∞)
---

## –†–µ—à–µ–Ω–∏–µ

## –†–µ—à–µ–Ω–∏–µ

```go
package main

import (
	"io"
	"os"

	"github.com/01-edu/z01"
)

func printStr(s string) {
	for _, r := range s {
		z01.PrintRune(r)
	}
}

func main() {
	if len(os.Args) == 1 {
		buffer := make([]byte, 1024)
		for {
			n, err := os.Stdin.Read(buffer)
			if n > 0 {
				for _, b := range buffer[:n] {
					z01.PrintRune(rune(b))
				}
			}
			if err == io.EOF || err != nil {
				break
			}
		}
		return
	}

	for i := 1; i < len(os.Args); i++ {
		filename := os.Args[i]

		f, err := os.Open(filename)
		if err != nil {
			errorMsg := "ERROR: " + err.Error() + "\n"
			printStr(errorMsg)
			os.Exit(1)
		}

		buffer := make([]byte, 1024)
		for {
			n, readErr := f.Read(buffer)
			if n > 0 {
				for _, b := range buffer[:n] {
					z01.PrintRune(rune(b))
				}
			}
			if readErr == io.EOF {
				break
			}
			if readErr != nil {
				errorMsg := "ERROR: read " + filename + ": " + readErr.Error() + "\n"
				printStr(errorMsg)
				f.Close()
				os.Exit(1)
			}
		}
		f.Close()
	}
}
```

---

## –ö–ª—é—á–µ–≤—ã–µ –ø–æ–Ω—è—Ç–∏—è

| **–¢–µ—Ä–º–∏–Ω –∏–ª–∏ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç** | **–û–±—ä—è—Å–Ω–µ–Ω–∏–µ** |
|:----------------------------|:---------------|
| **`os.Stdin`** | **–°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –≤–≤–æ–¥**. –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è, –∫–æ–≥–¥–∞ –∞—Ä–≥—É–º–µ–Ω—Ç—ã –Ω–µ –ø–µ—Ä–µ–¥–∞–Ω—ã (—á—Ç–µ–Ω–∏–µ —Å –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã –∏–ª–∏ —á–µ—Ä–µ–∑ –ø–∞–π–ø `|`). |
| **`os.Open(filename)`** | –§—É–Ω–∫—Ü–∏—è –¥–ª—è **–æ—Ç–∫—Ä—ã—Ç–∏—è —Ñ–∞–π–ª–∞**. –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —É–∫–∞–∑–∞—Ç–µ–ª—å –Ω–∞ —Ñ–∞–π–ª (`*os.File`) –∏ `error`. |
| **`file.Read(buffer)`** | **–ß—Ç–µ–Ω–∏–µ –±–ª–æ–∫–∞–º–∏**. –ß–∏—Ç–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –∏–∑ —Ñ–∞–π–ª–∞ –≤ –±—É—Ñ–µ—Ä (`buffer []byte`). –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø—Ä–æ—á–∏—Ç–∞–Ω–Ω—ã—Ö –±–∞–π—Ç–æ–≤ (`n`) –∏ –æ—à–∏–±–∫—É. |
| **`io.EOF`** | –°–ø–µ—Ü–∏–∞–ª—å–Ω—ã–π —Ç–∏–ø –æ—à–∏–±–∫–∏, –∫–æ—Ç–æ—Ä—ã–π –æ–∑–Ω–∞—á–∞–µ—Ç **End Of File (–ö–æ–Ω–µ—Ü —Ñ–∞–π–ª–∞)**. –°–∏–≥–Ω–∞–ª –æ —Ç–æ–º, —á—Ç–æ —á—Ç–µ–Ω–∏–µ –∑–∞–≤–µ—Ä—à–µ–Ω–æ. |
| **–ë—É—Ñ–µ—Ä (`make([]byte, 1024)`)** | –í—Ä–µ–º–µ–Ω–Ω–∞—è –æ–±–ª–∞—Å—Ç—å –ø–∞–º—è—Ç–∏ (—Å—Ä–µ–∑ –±–∞–π—Ç–æ–≤), –∏—Å–ø–æ–ª—å–∑—É–µ–º–∞—è –¥–ª—è —á—Ç–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –Ω–µ–±–æ–ª—å—à–∏–º–∏ –±–ª–æ–∫–∞–º–∏, —á—Ç–æ **—ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–µ–µ**. |
| **`os.Exit(1)`** | –§—É–Ω–∫—Ü–∏—è –¥–ª—è **–Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ–≥–æ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è** –ø—Ä–æ–≥—Ä–∞–º–º—ã —Å –∫–æ–¥–æ–º –æ—à–∏–±–∫–∏ `1` (–Ω–µ–Ω—É–ª–µ–≤–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ). |

---

## –õ–æ–≥–∏–∫–∞ –∏ –ø–æ—à–∞–≥–æ–≤—ã–π —Ä–∞–∑–±–æ—Ä –∫–æ–¥–∞

### 1. –û–±—Ä–∞–±–æ—Ç–∫–∞ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–≥–æ –≤–≤–æ–¥–∞ (Scenario 1)

**–£—Å–ª–æ–≤–∏–µ:** `if len(os.Args) == 1`
* –ï—Å–ª–∏ –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤ –Ω–µ—Ç, –ø—Ä–æ–≥—Ä–∞–º–º–∞ –≤—Ö–æ–¥–∏—Ç –≤ —ç—Ç–æ—Ç –±–ª–æ–∫.
* –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –±–µ—Å–∫–æ–Ω–µ—á–Ω—ã–π —Ü–∏–∫–ª `for {}` –¥–ª—è —á—Ç–µ–Ω–∏—è –∏–∑ **`os.Stdin`**.
* –ß—Ç–µ–Ω–∏–µ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –±–ª–æ–∫–∞–º–∏ –ø–æ 1024 –±–∞–π—Ç–∞ (`buffer`).
* –ï—Å–ª–∏ **`err == io.EOF`**, —Ü–∏–∫–ª –∑–∞–≤–µ—Ä—à–∞–µ—Ç—Å—è.


### 2. –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∫ —á—Ç–µ–Ω–∏—é —Ñ–∞–π–ª–æ–≤ (Scenario 2)

**–¶–∏–∫–ª:** `for i := 1; i < len(os.Args); i++`
* –ü—Ä–æ–≥—Ä–∞–º–º–∞ –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç –∫ —ç—Ç–æ–º—É –±–ª–æ–∫—É, –µ—Å–ª–∏ –µ—Å—Ç—å –æ–¥–∏–Ω –∏–ª–∏ –±–æ–ª–µ–µ –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤ (–∏–º–µ–Ω–∞ —Ñ–∞–π–ª–æ–≤).
* –¶–∏–∫–ª **–Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å `i = 1`**, —á—Ç–æ–±—ã **–∏–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞—Ç—å** `os.Args[0]` (–∏–º—è –ø—Ä–æ–≥—Ä–∞–º–º—ã) –∏ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ –∏–º–µ–Ω–∞ —Ñ–∞–π–ª–æ–≤.

### 3. –û—Ç–∫—Ä—ã—Ç–∏–µ –∏ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

```go
f, err := os.Open(filename)
if err != nil {
    // ... print ERROR message ...
    os.Exit(1)
}
```
 - os.Open –ø—ã—Ç–∞–µ—Ç—Å—è –æ—Ç–∫—Ä—ã—Ç—å —Ñ–∞–π–ª.

 - –ï—Å–ª–∏ —Ñ–∞–π–ª –Ω–µ –Ω–∞–π–¥–µ–Ω –∏–ª–∏ –Ω–µ—Ç –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞, –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è err.

 - –í —Å–ª—É—á–∞–µ –æ—à–∏–±–∫–∏, –ø—Ä–æ–≥—Ä–∞–º–º–∞ –≤—ã–≤–æ–¥–∏—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ –∏ –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ –∑–∞–≤–µ—Ä—à–∞–µ—Ç—Å—è —Å –∫–æ–¥–æ–º 1.

### 4. –ü–æ–±–∞–π—Ç–æ–≤–æ–µ —á—Ç–µ–Ω–∏–µ –∏ –≤—ã–≤–æ–¥

```go
for {
    n, readErr := f.Read(buffer)
    if n > 0 {
        // ... –≤—ã–≤–æ–¥ buffer[:n] —á–µ—Ä–µ–∑ z01.PrintRune ...
    }
    if readErr == io.EOF {
        break
    }
    // ... –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ —á—Ç–µ–Ω–∏—è
}
f.Close()
```
 - –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤—Ç–æ—Ä–æ–π –±–µ—Å–∫–æ–Ω–µ—á–Ω—ã–π —Ü–∏–∫–ª –¥–ª—è –±–ª–æ—á–Ω–æ–≥–æ —á—Ç–µ–Ω–∏—è.

 - n –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç, —Å–∫–æ–ª—å–∫–æ –±–∞–π—Ç–æ–≤ –±—ã–ª–æ –ø—Ä–æ—á–∏—Ç–∞–Ω–æ. –í—ã–≤–æ–¥–∏–º —Ç–æ–ª—å–∫–æ —ç—Ç–æ—Ç –æ–±—ä–µ–º (buffer[:n]).

 - –ü—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ io.EOF —Ü–∏–∫–ª –∑–∞–≤–µ—Ä—à–∞–µ—Ç—Å—è, –∏ —Ñ–∞–π–ª –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –∑–∞–∫—Ä—ã–≤–∞–µ—Ç—Å—è (f.Close()).
---

## –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

–ß—Ç–æ –Ω—É–∂–Ω–æ –≤—ã–Ω–µ—Å—Ç–∏ –∏ –∑–∞–ø–æ–º–Ω–∏—Ç—å –∏–∑ —ç—Ç–æ–≥–æ –∑–∞–¥–∞–Ω–∏—è:
* **–ú–Ω–æ–≥–æ–∑–∞–¥–∞—á–Ω–æ—Å—Ç—å `cat`**: –ö–ª—é—á–µ–≤–æ–µ –æ—Ç–ª–∏—á–∏–µ ‚Äî —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –∫–∞–∫ **–∞—Ä–≥—É–º–µ–Ω—Ç—ã-—Ñ–∞–π–ª—ã**, —Ç–∞–∫ –∏ **—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –≤–≤–æ–¥ (stdin)**.
* **–ß—Ç–µ–Ω–∏–µ –±–ª–æ–∫–∞–º–∏**: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –±—É—Ñ–µ—Ä–∞ –∏ —Ü–∏–∫–ª–∞ `for {}` –¥–ª—è —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ–≥–æ —á—Ç–µ–Ω–∏—è –±–æ–ª—å—à–∏—Ö —Ñ–∞–π–ª–æ–≤.
* **–ò–¥–∏–æ–º–∞ `io.EOF`**: –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Å–∏–≥–Ω–∞–ª–∞ –æ –∫–æ–Ω—Ü–µ —Ñ–∞–π–ª–∞, —á—Ç–æ–±—ã –∑–∞–≤–µ—Ä—à–∏—Ç—å —Ü–∏–∫–ª —á—Ç–µ–Ω–∏—è.
* **–û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ –∑–∞–∫—Ä—ã—Ç–∏–µ**: –í—Å–µ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `f.Close()` –¥–ª—è –æ—Å–≤–æ–±–æ–∂–¥–µ–Ω–∏—è —Å–∏—Å—Ç–µ–º–Ω—ã—Ö —Ä–µ—Å—É—Ä—Å–æ–≤.